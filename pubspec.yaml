name: triggeo
description: A smart location reminder application based on OpenStreetMap.
publish_to: 'none'
version: 1.0.0+1

environment:
  sdk: '>=3.2.0 <4.0.0'

dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:
    sdk: flutter

  # --- 核心状态管理与数据 ---
  # 保持在 2.6.1 以配合 riverpod_generator 2.4.0 解决与 Hive 的冲突
  flutter_riverpod: 2.6.1
  # 配合 2.6.1 使用
  riverpod_annotation: ^2.6.1

  # --- 地图与定位 ---
  flutter_map: ^8.2.2
  # Latlong2 保持最新
  latlong2: ^0.9.1
  # Geolocator 升级
  geolocator: ^14.0.2

  # --- 本地存储 ---
  # Hive 2.x 保持不变 (注意：Hive Generator 是版本冲突的根源)
  hive: ^2.2.3
  hive_flutter: ^1.1.0

  # --- 路由与通知 ---
  # 建议先升至 14.x 确保稳定，17.x 变动极大
  go_router: ^17.0.0
  flutter_local_notifications: ^19.5.0

  # --- 响应式编程 ---
  rxdart: ^0.28.0

  # --- UI与工具 ---
  uuid: ^4.3.3
  flutter_background_service: ^5.0.0
  dynamic_color: ^1.6.8
  # 升级 File Picker
  file_picker: ^8.0.0
  # 升级 Vibration
  vibration: ^2.0.0
  intl: ^0.20.2
  permission_handler: ^11.3.1
  audioplayers: ^6.0.0

dev_dependencies:
  flutter_test:
    sdk: flutter
  # 升级 Lints
  flutter_lints: ^4.0.0

  # --- 代码生成器 ---
  build_runner: ^2.4.13
  
  # [关键修复]：必须锁定在 2.4.0 以兼容 Hive Generator
  riverpod_generator: ^2.4.0
  
  hive_generator: ^2.0.1

# 某些情况下，如果仍有报错，可以尝试强制覆盖依赖 (可选)
# dependency_overrides:
#   analyzer: ^6.4.1